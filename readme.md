# 简易录播课系统

这是一个使用 PHP + MySQL 搭建的简易录播课程系统示例，前端采用原生 HTML/CSS/JS 并与后端接口分离：

- **登录页（index.php）**：提供现代化的登录体验，完成登录后自动跳转课堂。
- **课堂页（dashboard.php）**：按用户身份展示专属课程，支持录播播放与直播课状态提示，可识别哔哩哔哩链接并内置第三方播放器。
- **管理后台（admin.php）**：管理员可在独立页面中维护用户、课程、课节（含直播课时间/链接）以及课程分配。
- 后端接口均使用原生 PHP（`mysqli`）实现并返回 JSON 数据供前端调用。

## 快速开始

1. 将项目放置在支持 PHP 的服务器上，使 `index.php`、`dashboard.php`、`admin.php`、`install.php` 与 `api/` 目录可访问。
2. 首次部署后访问 `install.php`，按照页面提示填写数据库与管理员信息，脚本会自动：
   - 创建（如不存在）并初始化数据库表结构；
   - 生成 `config.php` 配置文件；
   - 创建首位管理员账号。
3. 安装完成后删除 `install.php` 并使用管理员账号登录系统。
4. 普通学员登录后进入课堂页即可观看被分配的课程；管理员在课堂页可跳转至后台继续维护资源。

如需手动部署或二次配置，可参考 `config.example.php` 与 `database.sql` 获取所需配置和建表语句。

## 目录结构

```
index.php             # 登录页面
dashboard.php         # 学员课堂页面
admin.php             # 管理后台
assets/
├── css/main.css      # 共享样式与主题
config.php            # 数据库和会话配置（示例已提供）
api/                  # 登录、课程、用户等接口
├── bootstrap.php     # 会话和数据库初始化
├── login.php         # 登录接口
├── logout.php        # 退出接口
├── session.php       # 获取当前登录用户
├── users.php         # 管理用户
├── courses.php       # 管理/获取课程及课节
├── lessons.php       # 管理课节（新增/编辑/删除，含直播课字段）
└── course_assignments.php # 课程分配
install.php           # 首次部署安装脚本
```

## 直播课功能

- 在管理后台的「课节管理」中选择课节类型为“直播课”，即可录入直播链接以及可选的开始、结束时间。
- 课堂页会为直播课展示专属卡片，自动识别“未开始 / 直播中 / 已结束”等状态，并提供一键进入直播教室的按钮。
- 当直播时间有变或课程结束后，可重新编辑课节切换为录播课或更新直播链接，学员视图会实时同步。

## 注意事项

- 所有需要登录的接口均基于 PHP 会话，需保证浏览器允许携带 Cookie（同源部署时默认即可）。
- 直播课字段（type/live_url/live_start_at/live_end_at）已纳入最新的 `database.sql`，请在更新代码后同步执行对应的数据库迁移。
- 示例未引入现代前端构建工具，方便直接修改并部署；实际环境中建议结合 HTTPS、输入校验、权限校验等最佳实践进行增强。
